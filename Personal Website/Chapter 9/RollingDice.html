<!DOCTYPE html>

<!-- Fig. 9.6: RollingDice.html -->
<!-- Rolling 12 dice and displaying frequencies -->
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css">
        <link rel="shortcut icon" href="../assets/Images/BK.Logo.png" />
        <link rel="stylesheet" href="../assets/css/style.css">
        <title>Die Rolling Fraquencies</title>
        <style type="text/css">
            img  	{ 
                margin-right: 10px;
                width: 100px;
            }
            table   {
                width: 200px;
                border-collapse: collapse;
                background-color: lightblue;
                margin-left: 30px;
            }
            table, td, th {
                border:1px solid black;
                padding:4px;
                margin-top: 20px;
            }
            th	{ text-align: left;
                    color: white;
                    background-color: darkblue;
            }
        </style>
    </head>
    <body>
        <nav class="examples-nav">
            <button class="examples-button">
               <a href="../chapter9.html">
                  <i class="fas fa-arrow-left"></i>
                  Go Back
               </a>
            </button>
        </nav>
        <p>
            <img id="die1" src="die2.png" alt = "die 2 image">
            <img id="die2" src="die5.png" alt = "die 5 image">
            <img id="die3" src="die3.png" alt = "die 3 image">
            <img id="die4" src="die6.png" alt = "die 6 image">
            <img id="die5" src="die1.png" alt = "die 1 image">
            <img id="die6" src="die4.png" alt = "die 4 image">
        </p>

        <p>
            <img id="die7" src="die3.png" alt = "die 3 image">
            <img id="die8" src="die5.png" alt = "die 5 image">
            <img id="die9" src="die1.png" alt = "die 1 image">
            <img id="die10" src="die6.png" alt = "die 6 image">
            <img id="die11" src="die4.png" alt = "die 4 image">
            <img id="die12" src="die2.png" alt = "die 2 image">
        </p>
        <form action="#">
            <input id="rollButton" type="button" value="Roll Dice">
        </form>
        <div id="frequencyTableDiv"></div>

        <script>
            var frequency1 = 0;	
            var frequency2 = 0;
            var frequency3 = 0;
            var frequency4 = 0;
            var frequency5 = 0;
            var frequency6 = 0;		 
            var totalDice = 0;

            // register button event handler
            function start()
            {
                var button = document.getElementById("rollButton");
                button = addEventListener("click", rollDice, false);
            } // end function start

            // roll the dice
            function rollDice()
            {
                var face; //face rolled

                //loop to roll die 12 times
                for ( var i = 1; i <= 12; ++i )
                {
                    face = Math.floor( 1 + Math.random()*6);
                    tallyRolls(face); // increment a frequency counter
                    setImage(i, face); // display appropriate die image
                    ++totalDice; // increment total
                } // end die rolling loop

                updateFrequencyTable();
            }// end function rollDice

            // increment appropriate frequency counter
            function tallyRolls(face)
            {
                switch ( face )
                {
                    case 1:
                    ++frequency1;
                    break;
                    case 2:
                    ++frequency2;
                    break;
                    case 3:
                    ++frequency3;
                    break;
                    case 4:
                    ++frequency4;
                    break;
                    case 5:
                    ++frequency5;
                    break;
                    case 6:
                    ++frequency6;
                    break;
                } // end switch
            } // end function tallyRolls

            // set image source for a die
            function setImage(dieNumber, face)
            {
                var dieImg = document.getElementById("die" + dieNumber );
                dieImg.setAttribute("src", "die" + face + ".png" );
                dieImg.setAttribute("alt", "die with" + face + " spot(s)");
            } // end function setImage

            // update frequency table in the page
            function updateFrequencyTable()
            {
                var tableDiv = document.getElementById("frequencyTableDiv");

                tableDiv.innerHTML = "<table>" + 
                "<caption>Die Rolling Frequencies</caption>" +
                "<thead><th>Face</th><th>Frequency</th>" + 
                "<th>Percent</th></thead>" + 
                "<tbody><tr><td>1</td><td>" + frequency1 + "</td><td>" +
                formatPercent(frequency1 / totalDice) + "</td></tr>" +
                "<tr><td>2</td><td>"  + frequency2 + "</td><td>" +
                formatPercent(frequency1 / totalDice) + "</td></tr>" +
                "<tr><td>3</td><td>"  + frequency3 + "</td><td>" +
                formatPercent(frequency1 / totalDice) + "</td></tr>" +
                "<tr><td>4</td><td>"  + frequency4 + "</td><td>" +
                formatPercent(frequency1 / totalDice) + "</td></tr>" +
                "<tr><td>5</td><td>"  + frequency5 + "</td><td>" +
                formatPercent(frequency1 / totalDice) + "</td></tr>" +
                "<tr><td>6</td><td>"  + frequency6 + "</td><td>" +
                formatPercent(frequency1 / totalDice) + "</td></tr>" +
                "</tbody></table>" ;
            } // end function updateFrequencyTable

            // format percentage
            function formatPercent(value)
            {
                value *= 100;
                return value.toFixed(2);
            }// end function formatPercent

            window.addEventListener("load", start, false );
        </script>
    </body>
</html>